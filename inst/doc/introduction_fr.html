<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">

<head>

<meta charset="utf-8">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="pandoc" />

<meta name="viewport" content="width=device-width, initial-scale=1">

<meta name="author" content="Julien Barnier" />

<meta name="date" content="2016-12-15" />

<title>Exploration interactive de résultats d’ACP/ACM avec explor</title>



<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; } /* Keyword */
code > span.dt { color: #902000; } /* DataType */
code > span.dv { color: #40a070; } /* DecVal */
code > span.bn { color: #40a070; } /* BaseN */
code > span.fl { color: #40a070; } /* Float */
code > span.ch { color: #4070a0; } /* Char */
code > span.st { color: #4070a0; } /* String */
code > span.co { color: #60a0b0; font-style: italic; } /* Comment */
code > span.ot { color: #007020; } /* Other */
code > span.al { color: #ff0000; font-weight: bold; } /* Alert */
code > span.fu { color: #06287e; } /* Function */
code > span.er { color: #ff0000; font-weight: bold; } /* Error */
code > span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #880000; } /* Constant */
code > span.sc { color: #4070a0; } /* SpecialChar */
code > span.vs { color: #4070a0; } /* VerbatimString */
code > span.ss { color: #bb6688; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #19177c; } /* Variable */
code > span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code > span.op { color: #666666; } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { color: #bc7a00; } /* Preprocessor */
code > span.at { color: #7d9029; } /* Attribute */
code > span.do { color: #ba2121; font-style: italic; } /* Documentation */
code > span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
</style>



<link href="data:text/css;charset=utf-8,body%20%7B%0Abackground%2Dcolor%3A%20%23fff%3B%0Amargin%3A%201em%20auto%3B%0Amax%2Dwidth%3A%20700px%3B%0Aoverflow%3A%20visible%3B%0Apadding%2Dleft%3A%202em%3B%0Apadding%2Dright%3A%202em%3B%0Afont%2Dfamily%3A%20%22Open%20Sans%22%2C%20%22Helvetica%20Neue%22%2C%20Helvetica%2C%20Arial%2C%20sans%2Dserif%3B%0Afont%2Dsize%3A%2014px%3B%0Aline%2Dheight%3A%201%2E35%3B%0A%7D%0A%23header%20%7B%0Atext%2Dalign%3A%20center%3B%0A%7D%0A%23TOC%20%7B%0Aclear%3A%20both%3B%0Amargin%3A%200%200%2010px%2010px%3B%0Apadding%3A%204px%3B%0Awidth%3A%20400px%3B%0Aborder%3A%201px%20solid%20%23CCCCCC%3B%0Aborder%2Dradius%3A%205px%3B%0Abackground%2Dcolor%3A%20%23f6f6f6%3B%0Afont%2Dsize%3A%2013px%3B%0Aline%2Dheight%3A%201%2E3%3B%0A%7D%0A%23TOC%20%2Etoctitle%20%7B%0Afont%2Dweight%3A%20bold%3B%0Afont%2Dsize%3A%2015px%3B%0Amargin%2Dleft%3A%205px%3B%0A%7D%0A%23TOC%20ul%20%7B%0Apadding%2Dleft%3A%2040px%3B%0Amargin%2Dleft%3A%20%2D1%2E5em%3B%0Amargin%2Dtop%3A%205px%3B%0Amargin%2Dbottom%3A%205px%3B%0A%7D%0A%23TOC%20ul%20ul%20%7B%0Amargin%2Dleft%3A%20%2D2em%3B%0A%7D%0A%23TOC%20li%20%7B%0Aline%2Dheight%3A%2016px%3B%0A%7D%0Atable%20%7B%0Amargin%3A%201em%20auto%3B%0Aborder%2Dwidth%3A%201px%3B%0Aborder%2Dcolor%3A%20%23DDDDDD%3B%0Aborder%2Dstyle%3A%20outset%3B%0Aborder%2Dcollapse%3A%20collapse%3B%0A%7D%0Atable%20th%20%7B%0Aborder%2Dwidth%3A%202px%3B%0Apadding%3A%205px%3B%0Aborder%2Dstyle%3A%20inset%3B%0A%7D%0Atable%20td%20%7B%0Aborder%2Dwidth%3A%201px%3B%0Aborder%2Dstyle%3A%20inset%3B%0Aline%2Dheight%3A%2018px%3B%0Apadding%3A%205px%205px%3B%0A%7D%0Atable%2C%20table%20th%2C%20table%20td%20%7B%0Aborder%2Dleft%2Dstyle%3A%20none%3B%0Aborder%2Dright%2Dstyle%3A%20none%3B%0A%7D%0Atable%20thead%2C%20table%20tr%2Eeven%20%7B%0Abackground%2Dcolor%3A%20%23f7f7f7%3B%0A%7D%0Ap%20%7B%0Amargin%3A%200%2E5em%200%3B%0A%7D%0Ablockquote%20%7B%0Abackground%2Dcolor%3A%20%23f6f6f6%3B%0Apadding%3A%200%2E25em%200%2E75em%3B%0A%7D%0Ahr%20%7B%0Aborder%2Dstyle%3A%20solid%3B%0Aborder%3A%20none%3B%0Aborder%2Dtop%3A%201px%20solid%20%23777%3B%0Amargin%3A%2028px%200%3B%0A%7D%0Adl%20%7B%0Amargin%2Dleft%3A%200%3B%0A%7D%0Adl%20dd%20%7B%0Amargin%2Dbottom%3A%2013px%3B%0Amargin%2Dleft%3A%2013px%3B%0A%7D%0Adl%20dt%20%7B%0Afont%2Dweight%3A%20bold%3B%0A%7D%0Aul%20%7B%0Amargin%2Dtop%3A%200%3B%0A%7D%0Aul%20li%20%7B%0Alist%2Dstyle%3A%20circle%20outside%3B%0A%7D%0Aul%20ul%20%7B%0Amargin%2Dbottom%3A%200%3B%0A%7D%0Apre%2C%20code%20%7B%0Abackground%2Dcolor%3A%20%23f7f7f7%3B%0Aborder%2Dradius%3A%203px%3B%0Acolor%3A%20%23333%3B%0Awhite%2Dspace%3A%20pre%2Dwrap%3B%20%0A%7D%0Apre%20%7B%0Aborder%2Dradius%3A%203px%3B%0Amargin%3A%205px%200px%2010px%200px%3B%0Apadding%3A%2010px%3B%0A%7D%0Apre%3Anot%28%5Bclass%5D%29%20%7B%0Abackground%2Dcolor%3A%20%23f7f7f7%3B%0A%7D%0Acode%20%7B%0Afont%2Dfamily%3A%20Consolas%2C%20Monaco%2C%20%27Courier%20New%27%2C%20monospace%3B%0Afont%2Dsize%3A%2085%25%3B%0A%7D%0Ap%20%3E%20code%2C%20li%20%3E%20code%20%7B%0Apadding%3A%202px%200px%3B%0A%7D%0Adiv%2Efigure%20%7B%0Atext%2Dalign%3A%20center%3B%0A%7D%0Aimg%20%7B%0Abackground%2Dcolor%3A%20%23FFFFFF%3B%0Apadding%3A%202px%3B%0Aborder%3A%201px%20solid%20%23DDDDDD%3B%0Aborder%2Dradius%3A%203px%3B%0Aborder%3A%201px%20solid%20%23CCCCCC%3B%0Amargin%3A%200%205px%3B%0A%7D%0Ah1%20%7B%0Amargin%2Dtop%3A%200%3B%0Afont%2Dsize%3A%2035px%3B%0Aline%2Dheight%3A%2040px%3B%0A%7D%0Ah2%20%7B%0Aborder%2Dbottom%3A%204px%20solid%20%23f7f7f7%3B%0Apadding%2Dtop%3A%2010px%3B%0Apadding%2Dbottom%3A%202px%3B%0Afont%2Dsize%3A%20145%25%3B%0A%7D%0Ah3%20%7B%0Aborder%2Dbottom%3A%202px%20solid%20%23f7f7f7%3B%0Apadding%2Dtop%3A%2010px%3B%0Afont%2Dsize%3A%20120%25%3B%0A%7D%0Ah4%20%7B%0Aborder%2Dbottom%3A%201px%20solid%20%23f7f7f7%3B%0Amargin%2Dleft%3A%208px%3B%0Afont%2Dsize%3A%20105%25%3B%0A%7D%0Ah5%2C%20h6%20%7B%0Aborder%2Dbottom%3A%201px%20solid%20%23ccc%3B%0Afont%2Dsize%3A%20105%25%3B%0A%7D%0Aa%20%7B%0Acolor%3A%20%230033dd%3B%0Atext%2Ddecoration%3A%20none%3B%0A%7D%0Aa%3Ahover%20%7B%0Acolor%3A%20%236666ff%3B%20%7D%0Aa%3Avisited%20%7B%0Acolor%3A%20%23800080%3B%20%7D%0Aa%3Avisited%3Ahover%20%7B%0Acolor%3A%20%23BB00BB%3B%20%7D%0Aa%5Bhref%5E%3D%22http%3A%22%5D%20%7B%0Atext%2Ddecoration%3A%20underline%3B%20%7D%0Aa%5Bhref%5E%3D%22https%3A%22%5D%20%7B%0Atext%2Ddecoration%3A%20underline%3B%20%7D%0A%0Acode%20%3E%20span%2Ekw%20%7B%20color%3A%20%23555%3B%20font%2Dweight%3A%20bold%3B%20%7D%20%0Acode%20%3E%20span%2Edt%20%7B%20color%3A%20%23902000%3B%20%7D%20%0Acode%20%3E%20span%2Edv%20%7B%20color%3A%20%2340a070%3B%20%7D%20%0Acode%20%3E%20span%2Ebn%20%7B%20color%3A%20%23d14%3B%20%7D%20%0Acode%20%3E%20span%2Efl%20%7B%20color%3A%20%23d14%3B%20%7D%20%0Acode%20%3E%20span%2Ech%20%7B%20color%3A%20%23d14%3B%20%7D%20%0Acode%20%3E%20span%2Est%20%7B%20color%3A%20%23d14%3B%20%7D%20%0Acode%20%3E%20span%2Eco%20%7B%20color%3A%20%23888888%3B%20font%2Dstyle%3A%20italic%3B%20%7D%20%0Acode%20%3E%20span%2Eot%20%7B%20color%3A%20%23007020%3B%20%7D%20%0Acode%20%3E%20span%2Eal%20%7B%20color%3A%20%23ff0000%3B%20font%2Dweight%3A%20bold%3B%20%7D%20%0Acode%20%3E%20span%2Efu%20%7B%20color%3A%20%23900%3B%20font%2Dweight%3A%20bold%3B%20%7D%20%20code%20%3E%20span%2Eer%20%7B%20color%3A%20%23a61717%3B%20background%2Dcolor%3A%20%23e3d2d2%3B%20%7D%20%0A" rel="stylesheet" type="text/css" />

</head>

<body>




<h1 class="title toc-ignore">Exploration interactive de résultats d’ACP/ACM avec <code>explor</code></h1>
<h4 class="author"><em>Julien Barnier</em></h4>
<h4 class="date"><em>2016-12-15</em></h4>


<div id="TOC">
<ul>
<li><a href="#explor">explor</a></li>
<li><a href="#fonctionnalites">Fonctionnalités</a></li>
<li><a href="#utilisation">Utilisation</a><ul>
<li><a href="#prcomp-princomp-et-massmca"><code>prcomp</code>, <code>princomp</code> et <code>MASS::mca</code></a></li>
<li><a href="#fonctions-de-factominer">Fonctions de <code>FactoMineR</code></a></li>
<li><a href="#fonctions-dade4">Fonctions d’<code>ade4</code></a></li>
<li><a href="#fonctions-de-gdatools">Fonctions de <code>GDAtools</code></a></li>
</ul></li>
<li><a href="#export-des-graphiques">Export des graphiques</a><ul>
<li><a href="#export-svg">Export SVG</a></li>
<li><a href="#recuperer-le-code-r">Récupérer le code R</a></li>
</ul></li>
<li><a href="#bugs-et-commentaires">Bugs et commentaires</a></li>
</ul>
</div>

<div id="explor" class="section level2">
<h2>explor</h2>
<p><code>explor</code> est un package R qui permet l’exploration “interactive” des résultats d’une analyse exploratoire multidimensionnelle.</p>
<p>Pour le moment il est utilisable avec les types d’analyses suivants :</p>
<table style="width:67%;">
<colgroup>
<col width="19%"></col>
<col width="19%"></col>
<col width="15%"></col>
<col width="12%"></col>
</colgroup>
<thead>
<tr class="header">
<th align="left">Méthode</th>
<th align="left">Fonction</th>
<th align="left">Package</th>
<th align="left">Notes</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">Analyse en composantes principales</td>
<td align="left">PCA</td>
<td align="left"><a href="http://factominer.free.fr/">FactoMineR</a></td>
<td align="left">-</td>
</tr>
<tr class="even">
<td align="left">Analyse des correspondances</td>
<td align="left">CA</td>
<td align="left"><a href="http://factominer.free.fr/">FactoMineR</a></td>
<td align="left">-</td>
</tr>
<tr class="odd">
<td align="left">Analyse des correspondances multiples</td>
<td align="left">MCA</td>
<td align="left"><a href="http://factominer.free.fr/">FactoMineR</a></td>
<td align="left">-</td>
</tr>
<tr class="even">
<td align="left">Analyse en composantes principales</td>
<td align="left">dudi.pca</td>
<td align="left"><a href="https://cran.r-project.org/package=ade4">ade4</a></td>
<td align="left">Les variables supplémentaires qualitatives ne sont pas prises en charge</td>
</tr>
<tr class="odd">
<td align="left">Analyse des correspondances</td>
<td align="left">dudi.coa</td>
<td align="left"><a href="https://cran.r-project.org/package=ade4">ade4</a></td>
<td align="left">-</td>
</tr>
<tr class="even">
<td align="left">Analyse des correspondances multiples</td>
<td align="left">dudi.acm</td>
<td align="left"><a href="https://cran.r-project.org/package=ade4">ade4</a></td>
<td align="left">Les variables supplémentaires quantitatives ne sont pas prises en charge</td>
</tr>
<tr class="odd">
<td align="left">Analyse des correspondances multiples spécifique</td>
<td align="left">speMCA</td>
<td align="left"><a href="https://cran.r-project.org/package=GDAtools">GDAtools</a></td>
<td align="left">Les variables supplémentaires ne sont pas prises en charge</td>
</tr>
<tr class="even">
<td align="left">Analyse des correspondances multiples</td>
<td align="left">mca</td>
<td align="left"><a href="https://cran.r-project.org/package=MASS">MASS</a></td>
<td align="left">Les variables supplémentaires ne sont pas prises en charge</td>
</tr>
<tr class="odd">
<td align="left">Analyse en composantes principales</td>
<td align="left">princomp</td>
<td align="left">stats</td>
<td align="left">Les variables supplémentaires ne sont pas prises en charge</td>
</tr>
<tr class="even">
<td align="left">Analyse en composantes principales</td>
<td align="left">prcomp</td>
<td align="left">stats</td>
<td align="left">Les variables supplémentaires ne sont pas prises en charge</td>
</tr>
</tbody>
</table>
<p>La philosophie d’<code>explor</code> est de n’être qu’une interface de visualisation, et de ne rien “exécuter” par elle-même. Les analyses et calculs se font dans votre script R, et <code>explor</code> vous aide seulement à visualiser leurs résultats. L’idée est de conserver l’ensemble des commandes dans les scripts et de ne pas risquer d’être un obstacle à la reproductibilité des analyses.</p>
</div>
<div id="fonctionnalites" class="section level2">
<h2>Fonctionnalités</h2>
<p>Pour chaque méthode, <code>explor</code> lance une interface Web interactive qui s’affiche soit directement dans RStudio, soit dans votre navigateur. Cette interface comprend une série d’onglets présentant différents tableaux et graphiques. Ceux-ci sont, autant que possible, “interactifs” : les résultats numériques sont affichés sous forme de tableaux dynamiques triables et filtrables (grâce au package <code>DT</code>), et les graphiques, générés pour la plupart par le package <code>scatterD3</code>, ont les fonctionnalités suivantes :</p>
<ul>
<li>zoom avec la molette de la souris</li>
<li>déplacement avec la souris</li>
<li>affichage de <em>tooltips</em> au survol des points</li>
<li>mise en valeur des données correspondantes au survol des items de légendes</li>
<li>étiquettes déplaçables</li>
<li>sélection de points à l’aide d’un outil de type “lasso”</li>
<li>possibilité d’export du graphique actuel au format SVG</li>
<li>possibilité de récupérer le code R permettant de reproduire le graphique actuel dans un script ou un document</li>
<li>les modifications du graphique se font sous la forme de transitions animées</li>
</ul>
<p>À noter que les interfaces sont traduites en français.</p>
</div>
<div id="utilisation" class="section level2">
<h2>Utilisation</h2>
<p>L’utilisation du package est très simple : il suffit d’appliquer la fonction <code>explor()</code> à l’objet résultant d’une méthode prise en charge.</p>
<div id="prcomp-princomp-et-massmca" class="section level3">
<h3><code>prcomp</code>, <code>princomp</code> et <code>MASS::mca</code></h3>
<p>Pour visualiser les résultats de ces fonctions, il suffit de passer l’objet résultat à <code>explor()</code>.</p>
<p>Voici un exemple avec une ACP réalisée avec <code>princomp</code> :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">data</span>(USArrests)
pca &lt;-<span class="st"> </span><span class="kw">princomp</span>(USArrests, <span class="dt">cor =</span> <span class="ot">TRUE</span>)
<span class="kw">explor</span>(pca)</code></pre></div>
<p><code>explor</code> permet de visualiser des individus supplémentaires dont les coordonnées ont été calculées avec <code>predict</code>. Il suffit de les ajouter comme un élément nommé <code>supi</code> de l’objet résultat.</p>
<p>Voici un exemple avec <code>prcomp</code> :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">pca &lt;-<span class="st"> </span><span class="kw">prcomp</span>(USArrests[<span class="dv">6</span>:<span class="dv">50</span>,], <span class="dt">scale. =</span> <span class="ot">TRUE</span>)
pca$supi &lt;-<span class="st"> </span><span class="kw">predict</span>(pca, USArrests[<span class="dv">1</span>:<span class="dv">5</span>,])
<span class="kw">explor</span>(pca)</code></pre></div>
<p>Pour <code>MASS::mca</code>, <code>explor()</code> permet également la visualisation de variables qualitatives supplémentaires. Leurs coordonnées doivent être ajoutées comme un élément nommé <code>supv</code> de l’objet résultat. À noter qu’il est également préférable d’ajouter manuellement les noms de lignes à l’élément <code>supi</code> car <code>predict</code> ne les conserve pas :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(MASS)
mca &lt;-<span class="st"> </span>MASS::<span class="kw">mca</span>(farms[<span class="dv">4</span>:<span class="dv">20</span>, <span class="dv">2</span>:<span class="dv">4</span>], <span class="dt">nf =</span> <span class="dv">11</span>)
supi_df &lt;-<span class="st"> </span>farms[<span class="dv">1</span>:<span class="dv">3</span>, <span class="dv">2</span>:<span class="dv">4</span>]
supi &lt;-<span class="st"> </span><span class="kw">predict</span>(mca, supi_df, <span class="dt">type=</span><span class="st">&quot;row&quot;</span>)
<span class="kw">rownames</span>(supi) &lt;-<span class="st"> </span><span class="kw">rownames</span>(supi_df)
mca$supi &lt;-<span class="st"> </span>supi
mca$supv &lt;-<span class="st"> </span><span class="kw">predict</span>(mca, farms[<span class="dv">4</span>:<span class="dv">20</span>, <span class="dv">1</span>, <span class="dt">drop=</span><span class="ot">FALSE</span>], <span class="dt">type=</span><span class="st">&quot;factor&quot;</span>)
<span class="kw">explor</span>(mca)</code></pre></div>
<p>À noter que les réultats de ces trois fonctions sont assez limités, elles ne fournissent que les coordonnées des variables et des individus, pas de contributions ou de cosinus carrés par exemple.</p>
</div>
<div id="fonctions-de-factominer" class="section level3">
<h3>Fonctions de <code>FactoMineR</code></h3>
<p>Pour les fonctions de <code>FactoMineR</code> prises en charge, il suffit de passer l’objet contenant les résultats directement à<code>explor()</code>.</p>
<p>Exemple d’analyse en composantes principales avec <code>FactoMineR::PCA</code> :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(FactoMineR)
<span class="kw">data</span>(decathlon)
pca &lt;-<span class="st"> </span><span class="kw">PCA</span>(decathlon[,<span class="dv">1</span>:<span class="dv">12</span>], <span class="dt">quanti.sup =</span> <span class="dv">11</span>:<span class="dv">12</span>)
<span class="kw">explor</span>(pca)</code></pre></div>
<p>Exemple d’analyse des correspondances simples avec <code>FactoMiner::CA</code> :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">data</span>(children)
res.ca &lt;-<span class="st"> </span><span class="kw">CA</span>(children, <span class="dt">row.sup =</span> <span class="dv">15</span>:<span class="dv">18</span>, <span class="dt">col.sup =</span> <span class="dv">6</span>:<span class="dv">8</span>)
<span class="kw">explor</span>(res.ca)</code></pre></div>
<p>Exemple d’analyse des correspondances multiples avec <code>FactoMineR::MCA</code> :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(FactoMineR)
<span class="kw">data</span>(hobbies)
mca &lt;-<span class="st"> </span><span class="kw">MCA</span>(hobbies[<span class="dv">1</span>:<span class="dv">1000</span>, <span class="kw">c</span>(<span class="dv">1</span>:<span class="dv">8</span>,<span class="dv">21</span>:<span class="dv">23</span>)], <span class="dt">quali.sup =</span> <span class="dv">9</span>:<span class="dv">10</span>, 
           <span class="dt">quanti.sup =</span> <span class="dv">11</span>, <span class="dt">ind.sup =</span> <span class="dv">1</span>:<span class="dv">100</span>)
<span class="kw">explor</span>(mca)</code></pre></div>
</div>
<div id="fonctions-dade4" class="section level3">
<h3>Fonctions d’<code>ade4</code></h3>
<p>Les résultats des fonctions d’<code>ade4</code> prises en charge peuvent également être directement passées à <code>explor()</code>.</p>
<p>Par exemple, pour visualiser les résultats d’une ACP :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(ade4)
<span class="kw">data</span>(deug)
pca &lt;-<span class="st"> </span><span class="kw">dudi.pca</span>(deug$tab, <span class="dt">scale =</span> <span class="ot">TRUE</span>, <span class="dt">scannf =</span> <span class="ot">FALSE</span>, <span class="dt">nf =</span> <span class="dv">5</span>)
<span class="kw">explor</span>(pca)</code></pre></div>
<p>Des étapes supplémentaires sont nécessaires si on souhaite ajouter des éléments supplémentaires, car <code>ade4</code> ne les inclut pas directement dans l’objet résultat. Il faut donc calculer les coordonnées de ces éléments avec <code>suprow</code> ou <code>supcol</code>, et les ajouter comme éléments <code>supi</code> (pour les individus supplémentaires) ou <code>supv</code> (pour les variables supplémentaires) de l’objet résultat.</p>
<p>Voici un exemple de comment faire tout cela pour une ACP :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">data</span>(deug)
d &lt;-<span class="st"> </span>deug$tab
sup_var &lt;-<span class="st"> </span>d[-(<span class="dv">1</span>:<span class="dv">10</span>), <span class="dv">8</span>:<span class="dv">9</span>]
sup_ind &lt;-<span class="st"> </span>d[<span class="dv">1</span>:<span class="dv">10</span>, -(<span class="dv">8</span>:<span class="dv">9</span>)]
pca &lt;-<span class="st"> </span><span class="kw">dudi.pca</span>(d[-(<span class="dv">1</span>:<span class="dv">10</span>), -(<span class="dv">8</span>:<span class="dv">9</span>)], <span class="dt">scale =</span> <span class="ot">TRUE</span>, <span class="dt">scannf =</span> <span class="ot">FALSE</span>, <span class="dt">nf =</span> <span class="dv">5</span>)
## Individus supplémentaires
supi &lt;-<span class="st"> </span><span class="kw">suprow</span>(pca, sup_ind)
pca$supi &lt;-<span class="st"> </span>supi$lisup
## Variables supplémentaires
supv &lt;-<span class="st"> </span><span class="kw">supcol</span>(pca, <span class="kw">dudi.pca</span>(sup_var, <span class="dt">scale =</span> <span class="ot">TRUE</span>, <span class="dt">scannf =</span> <span class="ot">FALSE</span>)$tab)
pca$supv &lt;-<span class="st"> </span>supv$cosup
<span class="kw">explor</span>(pca)</code></pre></div>
<p>Il est nécessaire de faire la même chose en cas d’éléments supplémentaires pour une analyse des correspondances multiples :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">data</span>(banque)
d &lt;-<span class="st"> </span>banque[-(<span class="dv">1</span>:<span class="dv">100</span>),-(<span class="dv">19</span>:<span class="dv">21</span>)]
ind_sup &lt;-<span class="st"> </span>banque[<span class="dv">1</span>:<span class="dv">100</span>, -(<span class="dv">19</span>:<span class="dv">21</span>)]
var_sup &lt;-<span class="st"> </span>banque[-(<span class="dv">1</span>:<span class="dv">100</span>),<span class="dv">19</span>:<span class="dv">21</span>]
acm &lt;-<span class="st"> </span><span class="kw">dudi.acm</span>(d, <span class="dt">scannf =</span> <span class="ot">FALSE</span>, <span class="dt">nf =</span> <span class="dv">5</span>)
## Variables supplémentaires
acm$supv &lt;-<span class="st"> </span><span class="kw">supcol</span>(acm, <span class="kw">dudi.acm</span>(var_sup, <span class="dt">scannf =</span> <span class="ot">FALSE</span>, <span class="dt">nf =</span> <span class="dv">5</span>)$tab)$cosup
## Individus supplémentaires
acm$supi &lt;-<span class="st"> </span><span class="kw">suprow</span>(acm, ind_sup)$lisup
<span class="kw">explor</span>(acm)</code></pre></div>
<p>Pour une analyse des correspondances simples, on peut afficher des lignes ou colonnes supplémentaires en ajoutant leurs coordonnées à des éléments nommés <code>supr</code> ou <code>supc</code> :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">data</span>(bordeaux)
tab &lt;-<span class="st"> </span>bordeaux
row_sup &lt;-<span class="st"> </span>tab[<span class="dv">5</span>,-<span class="dv">4</span>]
col_sup &lt;-<span class="st"> </span>tab[-<span class="dv">5</span>,<span class="dv">4</span>]
coa &lt;-<span class="st"> </span><span class="kw">dudi.coa</span>(tab[-<span class="dv">5</span>,-<span class="dv">4</span>], <span class="dt">nf =</span> <span class="dv">5</span>, <span class="dt">scannf =</span> <span class="ot">FALSE</span>)
coa$supr &lt;-<span class="st"> </span><span class="kw">suprow</span>(coa, row_sup)$lisup
coa$supc &lt;-<span class="st"> </span><span class="kw">supcol</span>(coa, col_sup)$cosup
<span class="kw">explor</span>(coa)</code></pre></div>
</div>
<div id="fonctions-de-gdatools" class="section level3">
<h3>Fonctions de <code>GDAtools</code></h3>
<p>Les résultats des fonctions de <code>GDAtools</code> prises en charge peuvent également être directement passées à <code>explor()</code>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(GDAtools)
<span class="kw">data</span>(Music)
mca &lt;-<span class="st"> </span><span class="kw">speMCA</span>(Music[,<span class="dv">1</span>:<span class="dv">5</span>],<span class="dt">excl=</span><span class="kw">c</span>(<span class="dv">3</span>,<span class="dv">6</span>,<span class="dv">9</span>,<span class="dv">12</span>,<span class="dv">15</span>))
<span class="kw">explor</span>(mca)</code></pre></div>
<p>Pour ajouter des individus supplémentaires, il est nécessaire de calculer leurs données associées à l’aide de la fonction <code>indsup</code>, puis de les ajouter manuellement comme un éléménet nommé <code>supi</code> de l’objet résultat.</p>
<p>Voici un exemple :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(GDAtools)
<span class="kw">data</span>(Music)
mca &lt;-<span class="st"> </span><span class="kw">speMCA</span>(Music[<span class="dv">3</span>:<span class="kw">nrow</span>(Music),<span class="dv">1</span>:<span class="dv">5</span>],<span class="dt">excl=</span><span class="kw">c</span>(<span class="dv">3</span>,<span class="dv">6</span>,<span class="dv">9</span>,<span class="dv">12</span>,<span class="dv">15</span>))
mca$supi &lt;-<span class="st"> </span><span class="kw">indsup</span>(mca,Music[<span class="dv">1</span>:<span class="dv">2</span>,<span class="dv">1</span>:<span class="dv">5</span>])
<span class="kw">explor</span>(mca)</code></pre></div>
</div>
</div>
<div id="export-des-graphiques" class="section level2">
<h2>Export des graphiques</h2>
<p><code>explor</code> offre deux possibilités pour exporter les graphiques affichés dans l’interface.</p>
<div id="export-svg" class="section level3">
<h3>Export SVG</h3>
<p>Pour exporter le graphique actuellement affiché au format SVG, cliquez sur le bouton <em>Exporter en SVG</em> (icône en bas de la barre latérale gauche), ou choisissez l’entrée <em>Export to SVG</em> du menu “engrenage” du graphique.</p>
<p>Le SVG est un format de dessin vectoriel, éditable et redimensionnable sans perte à l’aide d’un logiciel comme <a href="https://inkscape.org/">Inkscape</a>.</p>
<p>La fonction d’export SVG peut rencontrer des problèmes quand elle est effectuée depuis RStudio. Si c’est le cas, ouvrez d’abord <code>explor</code> dans un navigateur en cliquant sur <em>Open in Browser</em>, avant d’exporter.</p>
</div>
<div id="recuperer-le-code-r" class="section level3">
<h3>Récupérer le code R</h3>
<p>L’autre possibilité est de récupérer le code R permettant de générer le graphique actuellement affiché, ce qui permet de le reproduire ensuite dans un script ou un document <em>Rmarkdown</em>.</p>
<p>Pour cela, cliquez sur le bouton <em>Obtenir le code R</em> en bas de la barre latérale. Une boîte de dialogue s’affiche, vous n’avez plus qu’à copier/coller le code R qui s’y trouve.</p>
<p>À noter que ce code R respecte le zoom effectué sur le graphique au moment de l’export, mais pas les positions des labels. Si vous souhaitez conserver celles-ci, il faut d’abord les enregistrer dans un fichier CSV avec l’entrée <em>Export labels positions</em> du menu “Engrenage”. Ensuite, dans votre script, chargez ce fichier CSV dans un objet à l’aide de <code>read.csv</code> puis passez cet objet à l’argument <code>export_labels_positions</code> dans le code généré :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">labels &lt;-<span class="st"> </span><span class="kw">read.csv</span>(<span class="st">&quot;position_labels.csv&quot;</span>)
res &lt;-<span class="st"> </span>explor::<span class="kw">prepare_results</span>(mca)
explor::<span class="kw">MCA_var_plot</span>(res, <span class="dt">xax =</span> <span class="dv">1</span>, <span class="dt">yax =</span> <span class="dv">2</span>,
    <span class="dt">var_sup =</span> <span class="ot">TRUE</span>, , <span class="dt">var_lab_min_contrib =</span> <span class="dv">0</span>,
    <span class="dt">col_var =</span> <span class="st">&quot;Variable&quot;</span>, <span class="dt">symbol_var =</span> <span class="st">&quot;Type&quot;</span>,
    <span class="dt">size_var =</span> <span class="ot">NULL</span>, <span class="dt">size_range =</span> <span class="kw">c</span>(<span class="dv">10</span>, <span class="dv">300</span>),
    <span class="dt">labels_size =</span> <span class="dv">10</span>, <span class="dt">point_size =</span> <span class="dv">56</span>,
    <span class="dt">transitions =</span> <span class="ot">TRUE</span>, <span class="dt">labels_positions =</span> labels)</code></pre></div>
</div>
</div>
<div id="bugs-et-commentaires" class="section level2">
<h2>Bugs et commentaires</h2>
<p><code>explor</code> est un package très récent, qui comporte donc certainement des bugs et autres problèmes. N’hésitez pas à les signaler par mail ou en créant une <a href="https://github.com/juba/explor/issues"><em>issue</em> sur GitHub</a>.</p>
</div>



<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
